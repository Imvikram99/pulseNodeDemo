"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var getAllRoutes = function (app) {
    var routes = [];
    try {
        app._router.stack.forEach(function (middleware) {
            if (middleware.route) {
                // Routes registered directly on the app
                routes.push({
                    path: middleware.route.path,
                    methods: Object.keys(middleware.route.methods),
                });
            }
            else if (middleware.name === 'router') {
                // Routes added as router middleware
                middleware.handle.stack.forEach(function (handler) {
                    if (handler.route) {
                        routes.push({
                            path: handler.route.path,
                            methods: Object.keys(handler.route.methods),
                        });
                    }
                });
            }
        });
    }
    catch (error) {
        console.error('Error while fetching routes:', error);
    }
    return routes;
};
exports.default = getAllRoutes;
